<?xml version="1.0" encoding="utf-8" ?>
<local:ComposerPageAbstract
    x:Class="OpenEmail.Views.ComposerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:data="using:OpenEmail.ViewModels.Data"
    xmlns:helpers="using:OpenEmail.Helpers"
    xmlns:local="using:OpenEmail.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    x:Name="root"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
    mc:Ignorable="d">

    <Page.Resources>
        <Style
            x:Key="TitleBarButtonStyle"
            BasedOn="{StaticResource AccentButtonStyle}"
            TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{ThemeResource ApplicationForegroundThemeBrush}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Width" Value="32" />
            <Setter Property="Height" Value="32" />
        </Style>

        <!--  Picked Contact Template  -->
        <DataTemplate x:Key="PickedReaderTemplate" x:DataType="data:ContactViewModel">
            <Grid Height="20" ColumnSpacing="8">
                <ToolTipService.ToolTip>
                    <ToolTip Content="{x:Bind Contact.Address}" />
                </ToolTipService.ToolTip>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Viewbox>
                    <PersonPicture DisplayName="{x:Bind ContactDisplayName}" ProfilePicture="{x:Bind ProfileThumbnailUrl}" />
                </Viewbox>

                <TextBlock
                    Grid.Column="1"
                    VerticalAlignment="Center"
                    Text="{x:Bind ContactDisplayName}" />
            </Grid>
        </DataTemplate>

        <!--  Suggestion Template  -->
        <DataTemplate x:Key="ReaderSuggestionContentTemplate" x:DataType="data:ContactViewModel">
            <Grid Margin="0,6" ColumnSpacing="8">
                <ToolTipService.ToolTip>
                    <ToolTip Content="{x:Bind Contact.Address}" />
                </ToolTipService.ToolTip>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <PersonPicture
                    Width="36"
                    Height="36"
                    DisplayName="{x:Bind ContactDisplayName}"
                    ProfilePicture="{x:Bind ProfileThumbnailUrl}" />

                <TextBlock
                    Grid.Column="1"
                    VerticalAlignment="Center"
                    Text="{x:Bind ContactDisplayName}" />
            </Grid>
        </DataTemplate>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Title bar  -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Grid x:Name="ComposeTitleBar" Background="Transparent">
                <Image
                    Height="24"
                    Margin="24,12"
                    HorizontalAlignment="Left"
                    Source="/Assets/appicon.ico" />
            </Grid>

            <TextBlock
                Grid.ColumnSpan="2"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                HorizontalTextAlignment="Center"
                Style="{StaticResource BodyStrongTextBlockStyle}"
                Text="Draft" />

            <StackPanel
                Grid.Column="1"
                Margin="0,0,12,0"
                Orientation="Horizontal"
                Spacing="4">

                <!--  Minimize  -->
                <Button Click="MinimizeClicked" Style="{StaticResource TitleBarButtonStyle}">
                    <Viewbox Width="10" Height="10">
                        <PathIcon
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Data="F1 M 0.996094 10 C 0.859375 10 0.730794 9.973959 0.610352 9.921875 C 0.489909 9.869792 0.384115 9.798178 0.292969 9.707031 C 0.201823 9.615886 0.130208 9.510092 0.078125 9.389648 C 0.026042 9.269206 0 9.140625 0 9.003906 C 0 8.867188 0.026042 8.738607 0.078125 8.618164 C 0.130208 8.497722 0.201823 8.3903 0.292969 8.295898 C 0.384115 8.201498 0.489909 8.128256 0.610352 8.076172 C 0.730794 8.024089 0.859375 7.998047 0.996094 7.998047 L 19.003906 7.998047 C 19.140625 7.998047 19.269205 8.024089 19.389648 8.076172 C 19.51009 8.128256 19.615885 8.201498 19.707031 8.295898 C 19.798176 8.3903 19.869791 8.497722 19.921875 8.618164 C 19.973957 8.738607 20 8.867188 20 9.003906 C 20 9.140625 19.973957 9.269206 19.921875 9.389648 C 19.869791 9.510092 19.798176 9.615886 19.707031 9.707031 C 19.615885 9.798178 19.51009 9.869792 19.389648 9.921875 C 19.269205 9.973959 19.140625 10 19.003906 10 Z " />
                    </Viewbox>

                </Button>

                <!--  Close  -->
                <Button Click="CloseClicked" Style="{StaticResource TitleBarButtonStyle}">
                    <Viewbox Width="10" Height="10">
                        <PathIcon
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Data="F1 M 10 12.119141 L 2.558594 19.560547 C 2.421875 19.697266 2.260742 19.804688 2.075195 19.882812 C 1.889648 19.960938 1.699219 20 1.503906 20 C 1.295573 20 1.10026 19.960938 0.917969 19.882812 C 0.735677 19.804688 0.576172 19.697266 0.439453 19.560547 C 0.302734 19.423828 0.195312 19.264322 0.117188 19.082031 C 0.039062 18.89974 0 18.704428 0 18.496094 C 0 18.300781 0.039062 18.110352 0.117188 17.924805 C 0.195312 17.739258 0.302734 17.578125 0.439453 17.441406 L 7.880859 10 L 0.439453 2.558594 C 0.296224 2.415365 0.187174 2.250977 0.112305 2.06543 C 0.037435 1.879883 0 1.689453 0 1.494141 C 0 1.285809 0.039062 1.090496 0.117188 0.908203 C 0.195312 0.725912 0.302734 0.568035 0.439453 0.43457 C 0.576172 0.301107 0.735677 0.195312 0.917969 0.117188 C 1.10026 0.039062 1.295573 0 1.503906 0 C 1.699219 0 1.889648 0.039062 2.075195 0.117188 C 2.260742 0.195312 2.421875 0.302734 2.558594 0.439453 L 10 7.880859 L 17.441406 0.439453 C 17.734375 0.146484 18.089191 0 18.505859 0 C 18.707682 0 18.899738 0.039062 19.082031 0.117188 C 19.264322 0.195312 19.423828 0.302734 19.560547 0.439453 C 19.697266 0.576172 19.804688 0.735678 19.882812 0.917969 C 19.960938 1.100262 20 1.292318 20 1.494141 C 20 1.689453 19.962564 1.879883 19.887695 2.06543 C 19.812824 2.250977 19.703775 2.415365 19.560547 2.558594 L 12.119141 10 L 19.560547 17.441406 C 19.697266 17.578125 19.804688 17.739258 19.882812 17.924805 C 19.960938 18.110352 20 18.300781 20 18.496094 C 20 18.704428 19.960938 18.89974 19.882812 19.082031 C 19.804688 19.264322 19.697266 19.423828 19.560547 19.560547 C 19.423828 19.697266 19.264322 19.804688 19.082031 19.882812 C 18.899738 19.960938 18.704426 20 18.496094 20 C 18.300781 20 18.110352 19.960938 17.924805 19.882812 C 17.739258 19.804688 17.578125 19.697266 17.441406 19.560547 Z " />
                    </Viewbox>
                </Button>
            </StackPanel>
        </Grid>
        <CommandBar
            Grid.Row="1"
            Margin="24,0,0,0"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            HorizontalContentAlignment="Stretch"
            VerticalContentAlignment="Stretch"
            DefaultLabelPosition="Right">
            <CommandBar.PrimaryCommands>
                <AppBarToggleButton
                    IsChecked="{x:Bind ViewModel.DraftMessageViewModel.IsBroadcast, Mode=TwoWay}"
                    Label="Broadcast"
                    Visibility="{x:Bind ViewModel.IsBroadcastVisible, Mode=OneWay}">
                    <AppBarToggleButton.Icon>
                        <PathIcon Data="F1 M 0 10 C 0 9.329428 0.063477 8.671875 0.19043 8.027344 C 0.317383 7.382812 0.511068 6.751303 0.771484 6.132812 C 0.888672 5.859375 1.025391 5.576172 1.181641 5.283203 C 1.337891 4.990234 1.508789 4.702148 1.694336 4.418945 C 1.879883 4.135742 2.076823 3.865561 2.285156 3.608398 C 2.49349 3.351238 2.711588 3.121746 2.939453 2.919922 C 3.004557 2.861328 3.066406 2.817383 3.125 2.788086 C 3.183594 2.758789 3.258463 2.744141 3.349609 2.744141 C 3.525391 2.744141 3.671875 2.809246 3.789062 2.939453 C 3.90625 3.069662 3.964844 3.219402 3.964844 3.388672 C 3.964844 3.49284 3.948568 3.579102 3.916016 3.647461 C 3.883463 3.71582 3.834635 3.785809 3.769531 3.857422 C 3.619792 4.026693 3.473307 4.189453 3.330078 4.345703 C 3.186849 4.501953 3.05013 4.671225 2.919922 4.853516 C 2.373047 5.602214 1.958008 6.414389 1.674805 7.290039 C 1.391602 8.16569 1.25 9.069011 1.25 10 C 1.25 10.598959 1.308594 11.189779 1.425781 11.772461 C 1.542969 12.355144 1.722005 12.923178 1.962891 13.476562 C 2.333984 14.342448 2.835286 15.123698 3.466797 15.820312 C 3.544922 15.911459 3.626302 15.996094 3.710938 16.074219 C 3.795573 16.152344 3.876953 16.23698 3.955078 16.328125 C 4.026692 16.40625 4.080403 16.481119 4.116211 16.552734 C 4.152018 16.62435 4.169922 16.715496 4.169922 16.826172 C 4.169922 17.001953 4.108073 17.148438 3.984375 17.265625 C 3.860677 17.382812 3.714193 17.441406 3.544922 17.441406 C 3.401693 17.441406 3.271484 17.392578 3.154297 17.294922 C 2.926432 17.112631 2.700195 16.888021 2.475586 16.621094 C 2.250977 16.354168 2.036133 16.072592 1.831055 15.776367 C 1.625976 15.480144 1.437174 15.179037 1.264648 14.873047 C 1.092122 14.567058 0.947266 14.2806 0.830078 14.013672 C 0.55013 13.375651 0.341797 12.721354 0.205078 12.050781 C 0.068359 11.380209 0 10.696615 0 10 Z M 16.455078 17.441406 C 16.285807 17.441406 16.139322 17.382812 16.015625 17.265625 C 15.891927 17.148438 15.830078 17.001953 15.830078 16.826172 C 15.830078 16.715496 15.847981 16.62435 15.883789 16.552734 C 15.919596 16.481119 15.973307 16.40625 16.044922 16.328125 C 16.123047 16.23698 16.204426 16.152344 16.289062 16.074219 C 16.373697 15.996094 16.455078 15.911459 16.533203 15.820312 C 17.164713 15.123698 17.666016 14.342448 18.037109 13.476562 C 18.277994 12.923178 18.457031 12.355144 18.574219 11.772461 C 18.691406 11.189779 18.75 10.598959 18.75 10 C 18.75 9.069011 18.608398 8.16569 18.325195 7.290039 C 18.041992 6.414389 17.626953 5.602214 17.080078 4.853516 C 16.949869 4.671225 16.81315 4.501953 16.669922 4.345703 C 16.526691 4.189453 16.380207 4.026693 16.230469 3.857422 C 16.165363 3.785809 16.116535 3.71582 16.083984 3.647461 C 16.051432 3.579102 16.035156 3.49284 16.035156 3.388672 C 16.035156 3.219402 16.09375 3.069662 16.210938 2.939453 C 16.328125 2.809246 16.474609 2.744141 16.650391 2.744141 C 16.741535 2.744141 16.816406 2.758789 16.875 2.788086 C 16.933594 2.817383 16.995441 2.861328 17.060547 2.919922 C 17.2819 3.115234 17.498371 3.341473 17.709961 3.598633 C 17.921549 3.855795 18.118488 4.125977 18.300781 4.40918 C 18.483072 4.692383 18.652344 4.982097 18.808594 5.27832 C 18.964844 5.574545 19.101562 5.859375 19.21875 6.132812 C 19.479166 6.744793 19.674479 7.374676 19.804688 8.022461 C 19.934895 8.670248 20 9.329428 20 10 C 20 11.39974 19.720051 12.737631 19.160156 14.013672 C 19.042969 14.2806 18.899738 14.567058 18.730469 14.873047 C 18.561197 15.179037 18.374023 15.480144 18.168945 15.776367 C 17.963867 16.072592 17.749023 16.354168 17.524414 16.621094 C 17.299805 16.888021 17.073566 17.112631 16.845703 17.294922 C 16.728516 17.392578 16.598307 17.441406 16.455078 17.441406 Z M 3.125 10 C 3.125 9.563803 3.170573 9.119467 3.261719 8.666992 C 3.352864 8.21452 3.4847 7.775066 3.657227 7.348633 C 3.829752 6.922201 4.042969 6.516928 4.296875 6.132812 C 4.550781 5.748699 4.840495 5.410157 5.166016 5.117188 C 5.224609 5.065104 5.283203 5.024414 5.341797 4.995117 C 5.400391 4.96582 5.472005 4.951172 5.556641 4.951172 C 5.725911 4.951172 5.870768 5.014648 5.991211 5.141602 C 6.111653 5.268555 6.171875 5.416667 6.171875 5.585938 C 6.171875 5.690104 6.153971 5.779623 6.118164 5.854492 C 6.082356 5.929363 6.0319 6.00586 5.966797 6.083984 C 5.712891 6.383464 5.486653 6.679688 5.288086 6.972656 C 5.089518 7.265625 4.921875 7.569987 4.785156 7.885742 C 4.648438 8.201498 4.545898 8.531901 4.477539 8.876953 C 4.40918 9.222006 4.375 9.596354 4.375 10 C 4.375 10.625 4.475911 11.232097 4.677734 11.821289 C 4.879557 12.410482 5.172526 12.949219 5.556641 13.4375 C 5.647786 13.554688 5.742188 13.665365 5.839844 13.769531 C 5.9375 13.873698 6.038411 13.98112 6.142578 14.091797 C 6.214192 14.169922 6.269531 14.249675 6.308594 14.331055 C 6.347656 14.412436 6.367188 14.508464 6.367188 14.619141 C 6.367188 14.788412 6.308594 14.934896 6.191406 15.058594 C 6.074219 15.182292 5.930989 15.244141 5.761719 15.244141 C 5.63151 15.244141 5.507812 15.195312 5.390625 15.097656 C 5.032552 14.798178 4.713542 14.44987 4.433594 14.052734 C 4.153646 13.6556 3.916015 13.23405 3.720703 12.788086 C 3.52539 12.342123 3.377278 11.881511 3.276367 11.40625 C 3.175456 10.93099 3.125 10.46224 3.125 10 Z M 14.238281 15.244141 C 14.06901 15.244141 13.925781 15.182292 13.808594 15.058594 C 13.691406 14.934896 13.632812 14.788412 13.632812 14.619141 C 13.632812 14.508464 13.652344 14.412436 13.691406 14.331055 C 13.730469 14.249675 13.785807 14.169922 13.857422 14.091797 C 13.961588 13.98112 14.0625 13.873698 14.160156 13.769531 C 14.257812 13.665365 14.352213 13.554688 14.443359 13.4375 C 14.827474 12.949219 15.120442 12.410482 15.322266 11.821289 C 15.524088 11.232097 15.625 10.625 15.625 10 C 15.625 9.596354 15.59082 9.222006 15.522461 8.876953 C 15.454102 8.531901 15.351562 8.201498 15.214844 7.885742 C 15.078125 7.569987 14.910481 7.265625 14.711914 6.972656 C 14.513346 6.679688 14.287108 6.383464 14.033203 6.083984 C 13.968099 6.00586 13.917643 5.929363 13.881836 5.854492 C 13.846027 5.779623 13.828124 5.690104 13.828125 5.585938 C 13.828124 5.416667 13.888346 5.268555 14.008789 5.141602 C 14.129231 5.014648 14.274088 4.951172 14.443359 4.951172 C 14.527994 4.951172 14.599609 4.96582 14.658203 4.995117 C 14.716797 5.024414 14.775391 5.065104 14.833984 5.117188 C 15.159504 5.410157 15.449218 5.748699 15.703125 6.132812 C 15.95703 6.516928 16.170246 6.922201 16.342773 7.348633 C 16.515299 7.775066 16.647135 8.21452 16.738281 8.666992 C 16.829426 9.119467 16.875 9.563803 16.875 10 C 16.875 10.46224 16.824543 10.93099 16.723633 11.40625 C 16.622721 11.881511 16.474609 12.342123 16.279297 12.788086 C 16.083984 13.23405 15.846354 13.6556 15.566406 14.052734 C 15.286457 14.44987 14.967447 14.798178 14.609375 15.097656 C 14.550781 15.14974 14.493814 15.187175 14.438477 15.209961 C 14.383137 15.232748 14.316405 15.244141 14.238281 15.244141 Z M 8.4375 10 C 8.4375 9.785156 8.479817 9.583334 8.564453 9.394531 C 8.649088 9.205729 8.761393 9.041342 8.901367 8.901367 C 9.041341 8.761394 9.205729 8.649089 9.394531 8.564453 C 9.583333 8.479818 9.785156 8.4375 10 8.4375 C 10.214844 8.4375 10.416666 8.479818 10.605469 8.564453 C 10.794271 8.649089 10.958658 8.761394 11.098633 8.901367 C 11.238606 9.041342 11.350911 9.205729 11.435547 9.394531 C 11.520182 9.583334 11.5625 9.785156 11.5625 10 C 11.5625 10.214844 11.520182 10.416667 11.435547 10.605469 C 11.350911 10.794271 11.238606 10.958659 11.098633 11.098633 C 10.958658 11.238607 10.794271 11.350912 10.605469 11.435547 C 10.416666 11.520183 10.214844 11.5625 10 11.5625 C 9.785156 11.5625 9.583333 11.520183 9.394531 11.435547 C 9.205729 11.350912 9.041341 11.238607 8.901367 11.098633 C 8.761393 10.958659 8.649088 10.794271 8.564453 10.605469 C 8.479817 10.416667 8.4375 10.214844 8.4375 10 Z " />
                    </AppBarToggleButton.Icon>
                </AppBarToggleButton>

                <AppBarButton
                    Command="{x:Bind ViewModel.SendCommand}"
                    Icon="Send"
                    Label="Send" />
            </CommandBar.PrimaryCommands>
        </CommandBar>
        <Grid
            Grid.Row="2"
            Padding="24,0,09,24"
            RowSpacing="6">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <ScrollView Grid.Row="1" Padding="0,0,16,0">
                <Grid RowSpacing="6">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="1" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="1" />
                        <RowDefinition Height="*" MinHeight="75" />
                        <RowDefinition Height="Auto" MinHeight="20" />
                    </Grid.RowDefinitions>

                    <!--  Readers  -->
                    <Grid
                        Grid.Row="1"
                        ColumnSpacing="12"
                        Visibility="{x:Bind helpers:XamlHelpers.ReverseBooleanToVisibility(ViewModel.DraftMessageViewModel.IsBroadcast), Mode=OneWay}">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <controls:TokenizingTextBox
                            Grid.Row="1"
                            VerticalAlignment="Center"
                            BorderThickness="0"
                            ItemsSource="{x:Bind ViewModel.DraftMessageViewModel.ReaderViewModels, Mode=OneWay}"
                            LostFocus="ReaderLostFocus"
                            PlaceholderText="add readers"
                            SuggestedItemTemplate="{StaticResource ReaderSuggestionContentTemplate}"
                            SuggestedItemsSource="{x:Bind ViewModel.ContactViewModels}"
                            TokenDelimiter=","
                            TokenItemAdding="ReaderBeingAdded"
                            TokenItemTemplate="{StaticResource PickedReaderTemplate}" />

                        <InfoBar
                            Title="Invalid Addresses"
                            Grid.Row="0"
                            IsClosable="True"
                            IsOpen="{x:Bind ViewModel.IsErrorMessageVisible, Mode=OneWay}"
                            Message="{x:Bind ViewModel.ErrorMessage, Mode=OneWay}"
                            Severity="Error" />

                    </Grid>

                    <Border
                        Grid.Row="2"
                        VerticalAlignment="Stretch"
                        BorderBrush="{ThemeResource GeneralSeperatorBrush}" />

                    <!--  Subject  -->
                    <TextBox
                        Grid.Row="3"
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        BorderThickness="0"
                        PlaceholderText="add subject"
                        Text="{x:Bind ViewModel.DraftMessageViewModel.Subject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                    <Border
                        Grid.Row="4"
                        VerticalAlignment="Stretch"
                        BorderBrush="{ThemeResource GeneralSeperatorBrush}" />

                    <!--  Message  -->
                    <TextBox
                        Grid.Row="5"
                        Margin="0,0,0,20"
                        AcceptsReturn="True"
                        BorderThickness="0"
                        PlaceholderText="write your message here"
                        Text="{x:Bind ViewModel.DraftMessageViewModel.Body, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                    <!--  Attachments  -->
                    <Grid
                        Grid.Row="6"
                        AllowDrop="True"
                        Background="{ThemeResource AttachmentDropBackgroundBrush}"
                        CornerRadius="8"
                        DragEnter="AttachmentDragEnter"
                        Drop="AttachmentDropped"
                        RowSpacing="12">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <StackPanel
                            Margin="0,24,0,0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Spacing="8">
                            <PathIcon
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Data="F1 M 3.056641 18.75 C 2.646484 18.75 2.255859 18.666992 1.884766 18.500977 C 1.513672 18.334961 1.189779 18.113607 0.913086 17.836914 C 0.636393 17.560221 0.415039 17.236328 0.249023 16.865234 C 0.083008 16.494141 0 16.103516 0 15.693359 L 0 4.306641 C 0 3.896484 0.083008 3.505859 0.249023 3.134766 C 0.415039 2.763672 0.636393 2.439779 0.913086 2.163086 C 1.189779 1.886395 1.513672 1.665039 1.884766 1.499023 C 2.255859 1.333008 2.646484 1.25 3.056641 1.25 L 6.875 1.25 C 7.324219 1.25 7.709961 1.319988 8.032227 1.459961 C 8.354492 1.599936 8.644205 1.785482 8.901367 2.016602 C 9.158528 2.247723 9.397786 2.513021 9.619141 2.8125 C 9.840494 3.11198 10.071614 3.42448 10.3125 3.75 L 16.943359 3.75 C 17.353516 3.75 17.744141 3.833008 18.115234 3.999023 C 18.486328 4.165039 18.810221 4.386394 19.086914 4.663086 C 19.363605 4.939779 19.584961 5.263672 19.750977 5.634766 C 19.916992 6.005859 20 6.396484 20 6.806641 L 20 9.902344 C 19.817707 9.674479 19.622395 9.456381 19.414062 9.248047 C 19.205729 9.039714 18.984375 8.847656 18.75 8.671875 L 18.75 6.875 C 18.75 6.621095 18.701172 6.380209 18.603516 6.152344 C 18.505859 5.924479 18.370768 5.724284 18.198242 5.551758 C 18.025715 5.379232 17.82552 5.244142 17.597656 5.146484 C 17.369791 5.048829 17.128906 5.000001 16.875 5 L 10.185547 5 C 9.957682 5.156251 9.736328 5.309246 9.521484 5.458984 C 9.306641 5.608725 9.088541 5.742188 8.867188 5.859375 C 8.645833 5.976562 8.413086 6.070964 8.168945 6.142578 C 7.924805 6.214193 7.65625 6.25 7.363281 6.25 L 1.25 6.25 L 1.25 15.625 C 1.25 15.878906 1.298828 16.119791 1.396484 16.347656 C 1.494141 16.575521 1.629232 16.775717 1.801758 16.948242 C 1.974284 17.120768 2.174479 17.255859 2.402344 17.353516 C 2.630208 17.451172 2.871094 17.5 3.125 17.5 L 7.900391 17.5 C 8.011067 17.721354 8.129883 17.936197 8.256836 18.144531 C 8.383789 18.352865 8.522135 18.554688 8.671875 18.75 Z M 7.363281 5 C 7.539062 5.000001 7.70345 4.977215 7.856445 4.931641 C 8.009439 4.886068 8.154297 4.825847 8.291016 4.750977 C 8.427734 4.676107 8.562825 4.5931 8.696289 4.501953 C 8.829752 4.410808 8.964844 4.316406 9.101562 4.21875 C 8.951822 4.016928 8.805338 3.813477 8.662109 3.608398 C 8.51888 3.40332 8.36263 3.219402 8.193359 3.056641 C 8.024088 2.893881 7.833658 2.760418 7.62207 2.65625 C 7.410481 2.552084 7.161458 2.5 6.875 2.5 L 3.125 2.5 C 2.871094 2.5 2.630208 2.548828 2.402344 2.646484 C 2.174479 2.744141 1.974284 2.879232 1.801758 3.051758 C 1.629232 3.224285 1.494141 3.42448 1.396484 3.652344 C 1.298828 3.880209 1.25 4.121094 1.25 4.375 L 1.25 5 Z M 8.75 14.375 C 8.75 13.600261 8.898111 12.871094 9.194336 12.1875 C 9.49056 11.503906 9.892578 10.908203 10.400391 10.400391 C 10.908203 9.892578 11.503906 9.490561 12.1875 9.194336 C 12.871093 8.898112 13.60026 8.75 14.375 8.75 C 14.889322 8.75 15.385741 8.816732 15.864258 8.950195 C 16.342773 9.083659 16.790363 9.272461 17.207031 9.516602 C 17.623697 9.760742 18.004557 10.055339 18.349609 10.400391 C 18.69466 10.745443 18.989258 11.126303 19.233398 11.542969 C 19.477539 11.959636 19.66634 12.407227 19.799805 12.885742 C 19.933268 13.364258 20 13.860678 20 14.375 C 20 15.14974 19.851887 15.878906 19.555664 16.5625 C 19.259439 17.246094 18.857422 17.841797 18.349609 18.349609 C 17.841797 18.857422 17.246094 19.259439 16.5625 19.555664 C 15.878906 19.851889 15.149739 20 14.375 20 C 13.59375 20 12.861328 19.853516 12.177734 19.560547 C 11.494141 19.267578 10.898438 18.867188 10.390625 18.359375 C 9.882812 17.851562 9.482422 17.255859 9.189453 16.572266 C 8.896484 15.888672 8.75 15.15625 8.75 14.375 Z M 15 15 L 16.875 15 C 17.04427 15 17.190754 14.938151 17.314453 14.814453 C 17.43815 14.690756 17.5 14.544271 17.5 14.375 C 17.5 14.205729 17.43815 14.059245 17.314453 13.935547 C 17.190754 13.81185 17.04427 13.75 16.875 13.75 L 15 13.75 L 15 11.875 C 14.999999 11.705729 14.93815 11.559245 14.814453 11.435547 C 14.690755 11.31185 14.544271 11.25 14.375 11.25 C 14.205729 11.25 14.059244 11.31185 13.935547 11.435547 C 13.811849 11.559245 13.75 11.705729 13.75 11.875 L 13.75 13.75 L 11.875 13.75 C 11.705729 13.75 11.559244 13.81185 11.435547 13.935547 C 11.311849 14.059245 11.25 14.205729 11.25 14.375 C 11.25 14.544271 11.311849 14.690756 11.435547 14.814453 C 11.559244 14.938151 11.705729 15 11.875 15 L 13.75 15 L 13.75 16.875 C 13.75 17.044271 13.811849 17.190756 13.935547 17.314453 C 14.059244 17.43815 14.205729 17.5 14.375 17.5 C 14.544271 17.5 14.690755 17.43815 14.814453 17.314453 C 14.93815 17.190756 14.999999 17.044271 15 16.875 Z " />
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <TextBlock VerticalAlignment="Center" Text="Drag and drop files, or " />
                                <HyperlinkButton
                                    Margin="-12,0,0,0"
                                    Padding="4,0,4,0"
                                    Command="{x:Bind ViewModel.BrowseCommand}"
                                    Content="Browse" />
                            </StackPanel>
                        </StackPanel>

                        <ItemsControl
                            Grid.Row="1"
                            Margin="24"
                            ItemTemplate="{StaticResource ComposerAttachmentTemplate}"
                            ItemsSource="{x:Bind ViewModel.DraftMessageViewModel.AttachmentViewModels, Mode=OneWay}" />
                    </Grid>
                </Grid>
            </ScrollView>

        </Grid>

    </Grid>
</local:ComposerPageAbstract>
